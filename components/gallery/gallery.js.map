{"version":3,"file":"components\\gallery\\gallery.js","sources":["webpack:///./src/components/gallery/gallery.ts?e2e0","webpack:///./src/components/gallery/gallery.ts"],"sourcesContent":["module.exports = require(\"!./gallery.ts\")","Component({\r\n    options: {\r\n        addGlobalClass: true\r\n    },\r\n    properties: {\r\n        imgUrls: {\r\n            type: Array,\r\n            value: [],\r\n            observer(newVal) {\r\n                this.setData({ currentImgs: newVal })\r\n            }\r\n        },\r\n        showDelete: {\r\n            // 是否显示delete按钮\r\n            type: Boolean,\r\n            value: true\r\n        },\r\n        show: {\r\n            type: Boolean,\r\n            value: true,\r\n            observer: '_showChange'\r\n        },\r\n        current: {\r\n            type: Number,\r\n            value: 0\r\n        },\r\n        hideOnClick: {\r\n            type: Boolean,\r\n            value: true\r\n        },\r\n        extClass: {\r\n            type: String,\r\n            value: ''\r\n        }\r\n    },\r\n    data: {\r\n        wrapperShow: false,\r\n        innerShow: false,\r\n        currentImgs: []\r\n    },\r\n    ready() {\r\n        this._showChange(this.data.show)\r\n        const data: any = this.data\r\n        this.setData({ currentImgs: data.imgUrls })\r\n    },\r\n    methods: {\r\n        _showChange(show) {\r\n            if (show) {\r\n                this.setData({\r\n                    wrapperShow: true,\r\n                    innerShow: true\r\n                })\r\n            } else {\r\n                this.setData({ innerShow: false })\r\n                setTimeout(() => {\r\n                    this.setData({ wrapperShow: false })\r\n                }, 300)\r\n            }\r\n        },\r\n        change(e) {\r\n            this.setData({\r\n                current: e.detail.current\r\n            })\r\n            this.triggerEvent('change', { current: e.detail.current }, {})\r\n        },\r\n        deleteImg() {\r\n            const data: any = this.data\r\n            const imgs = data.currentImgs\r\n            const url = imgs.splice(data.current, 1)\r\n            this.triggerEvent('delete', { url: url[0], index: data.current }, {})\r\n            if (imgs.length === 0) {\r\n                // @ts-ignore\r\n                this.hideGallery()\r\n                return\r\n            }\r\n            this.setData({\r\n                current: 0,\r\n                currentImgs: imgs\r\n            })\r\n        },\r\n        hideGallery() {\r\n            const data: any = this.data\r\n            if (data.hideOnClick) {\r\n                this.setData({\r\n                    show: false\r\n                })\r\n                this.triggerEvent('hide', {}, {})\r\n            }\r\n        }\r\n    }\r\n})\r\n"],"mappings":";;;;;;;;;;;;;;AAAA;;;;;;;;;;;ACAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AALA;AAOA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AA1BA;AA+BA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AA3CA;AA7CA;;;;;;;;","sourceRoot":""}